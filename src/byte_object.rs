//! バイトストリームとの間でオブジェクトを変換するトレイト。
//!
//! ネットワークパケットのヘッダーやその他のデータ構造を
//! バイトストリームから読み書きするための共通インターフェースを定義する
//! `ByteObject` トレイトを提供する。

use crate::byte_stream::ByteStream;

/// バイトストリームとの間でオブジェクトを変換するトレイト。
///
/// このトレイトを実装する型は、バイトストリームから自身を構築する方法と、
/// 自身をバイトストリームに追加する方法を提供する必要がある。
pub trait ByteObject {
    /// バイトストリームからオブジェクトを生成する。
    ///
    /// # 引数
    /// * `src` - 読み取り元の `ByteStream`。
    ///
    /// # 戻り値
    /// 生成されたオブジェクト。
    fn from_bytes(src: &mut ByteStream) -> Self;

    /// オブジェクトをバイトストリームに追加する。
    ///
    /// # 引数
    /// * `dst` - 書き込み先の `ByteStream`。
    ///
    /// # 戻り値
    /// 追加されたバイト数。
    fn append_to(&self, dst: &mut ByteStream) -> usize;
}